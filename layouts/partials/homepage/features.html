<section id="features" aria-label="{{ .Site.Params.Features.title
}}" class="relative overflow-hidden bg-blue-600 pb-28 pt-20 sm:py-32" x-data="{ current_feature: 'risk-assessment' }">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 relative">
    <div class="max-w-2xl md:mx-auto md:text-center xl:max-w-none">
      <h2 class="font-display text-3xl tracking-tight text-white sm:text-4xl md:text-5xl">{{ .Site.Params.Features.title
        }}</h2>
      <p class="mt-6 text-lg tracking-tight text-blue-100">{{ .Site.Params.Features.subtitle }}</p>
    </div>
    <div class="mt-16 grid grid-cols-1 items-center gap-y-2 pt-10 sm:gap-y-6 md:mt-20 lg:grid-cols-12 lg:pt-0">
      <div class="-mx-4 flex overflow-x-auto pb-4 sm:mx-0 sm:overflow-visible sm:pb-0 lg:col-span-5">
        <div
          class="relative z-10 flex gap-x-4 whitespace-nowrap px-4 sm:mx-auto sm:px-0 lg:mx-0 lg:block lg:gap-x-0 lg:gap-y-1 lg:whitespace-normal"
          role="tablist" aria-orientation="vertical">
          {{ range .Site.Params.features.main_features }}
          <div x-on:click="current_feature = '{{ .id }}'"
            class="group relative rounded-full px-4 py-1 lg:rounded-l-xl lg:rounded-r-none lg:p-6"
            :class="current_feature == '{{ .id }}' ? 'bg-white lg:bg-white/10 lg:ring-1 lg:ring-inset lg:ring-white/10' : 'hover:bg-white/10 lg:hover:bg-white/5'">
            <h3><button :class="current_feature == '{{ .id }}' ? 'text-blue-600' : 'hover:text-white'"
                class="font-display text-lg text-blue-100 lg:text-white " id="feature-tab-{{ .id }}" role="tab"
                type="button" aria-selected="false" tabindex="-1" aria-controls="feature-panel-{{ .id }}"><span
                  class="absolute inset-0 rounded-full lg:rounded-l-xl lg:rounded-r-none"></span>{{ .name }}</button>
            </h3>
            <p class="mt-2 hidden text-sm lg:block text-blue-100 group-hover:text-white"
              :class="current_feature == '{{ .id }}' ? 'text-white' : ''">{{ .desc }}</p>
          </div>
          {{ end }}
        </div>
      </div>
      <div class="lg:col-span-7">
        {{ range .Site.Params.features.main_features }}
        <div id="feature-panel-{{ .id }}" role="tabpanel" tabindex="-1" aria-labelledby="feature-tab-{{ .id }}"
          x-show="current_feature == '{{ .id }}'">
          <div class="relative sm:px-6 lg:hidden">
            <div
              class="absolute -inset-x-4 bottom-[-4.25rem] top-[-6.5rem] bg-white/10 ring-1 ring-inset ring-white/10 sm:inset-x-0 sm:rounded-t-xl">
            </div>
            <p class="relative mx-auto max-w-2xl text-base text-white sm:text-center">{{ .desc }}</p>
          </div>
          <div
            class="mt-10 w-[45rem] overflow-hidden rounded-xl bg-slate-50 shadow-xl shadow-blue-900/20 sm:w-auto lg:mt-0 lg:w-[67.8125rem]">
            <img alt="" fetchpriority="high" width="2174" height="1464" decoding="async" data-nimg="1" class="w-full"
              style="color:transparent" src="{{ .img }}">
          </div>
        </div>
        {{ end }}
      </div>
    </div>
  </div>
</section>

<div class="my-5" x-data="{ selected_group: 'security-plan' }">
  <div class="mb-4">
    <div class="sm:hidden">
      <label for="tabs" class="sr-only">Select a tab</label>
      <select id="tabs" name="tabs" x-on:change="selected_group = $event.target.value"
        class="block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500">
        {{ range .Site.Params.features.groups }}
        <option value="{{ .id }}">{{ .name }}</option>
        {{ end }}
      </select>
    </div>
    <div class="hidden sm:block">
      <div class="">
        <nav class="flex justify-center" aria-label="Tabs">
          <!-- Current: "border-indigo-500 text-indigo-600", Default: "border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700" -->
          {{ range .Site.Params.features.groups }}
          <span x-on:click="selected_group = '{{ .id }}'" :class="selected_group == '{{ .id }}' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700'"
            class="cursor-pointer w-1/4 border-b-2 py-4 px-1 text-center text-sm font-medium">
            {{.name }}</span>
          {{ end }}
        </nav>
      </div>
    </div>
  </div>

  {{ range .Site.Params.features.groups }}
  <div class="mx-4 overflow-hidden sm:grid sm:grid-cols-3 sm:gap-3 pb-4"
    x-show="selected_group == '{{ .id }}'">
    {{ range .features }}
    <div class="sm:rounded-lg border sm:drop-shadow-md group relative bg-white p-6">
      <div>
        <span class="inline-flex rounded-lg p-3 bg-purple-50 text-purple-700 ring-4 ring-white">
          <svg class="h-6 w-6 text-indigo-600" viewBox="0 0 512 512" fill="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="{{ .icon }}" />
          </svg>
        </span>
      </div>
      <div class="mt-8">
        <h3 class="text-base font-semibold leading-6 text-gray-900">
          <a href="#" class="focus:outline-none">
            <!-- Extend touch target to entire panel -->
            <span class="absolute inset-0" aria-hidden="true"></span>
            {{ .name }}
          </a>
        </h3>
        <p class="mt-2 text-sm text-gray-500">{{ .desc }}</p>
      </div>
    </div>
    {{ end }}
  </div>
  {{ end }}
</div>